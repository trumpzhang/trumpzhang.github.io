<!DOCTYPE html>
<html lang="zh-cn"><head>
  <meta charset="utf-8">
  <title>张志宇的博客</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A coder">
  <meta name="author" content="张志宇">
  <meta name="generator" content="Hugo 0.65.1" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://trumpzhang.github.io/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://trumpzhang.github.io/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://trumpzhang.github.io/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://trumpzhang.github.io/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://trumpzhang.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://trumpzhang.github.io/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://trumpzhang.github.io/images/favicon.png " type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom">
      <a class="navbar-brand mobile-view" href="https://trumpzhang.github.io"><img class="img-fluid"
          src="https://trumpzhang.github.io/images/logo.png" alt="张志宇的博客"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/trumpzhang/"><i class="ti-github"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://trumpzhang.github.io"><img class="img-fluid"
            src="https://trumpzhang.github.io/images/logo.png" alt="张志宇的博客"></a>

        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://trumpzhang.github.io"> Home </a>
          </li>
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://trumpzhang.github.io/blog">Blog</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://trumpzhang.github.io/about">About</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://trumpzhang.github.io/contact">Contact</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search px-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://trumpzhang.github.io/search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        
        <a href="/categories/django"
          class="text-primary">Django</a>
        
        <h2>Django框架实现在线考试系统</h2>
        <div class="mb-3 post-meta">
          <span>By 张志宇</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>04 March 2020</span>
          
        </div>
        
        <img src="https://trumpzhang.github.io/images/django/python.jpg" class="img-fluid w-100 mb-4" alt="Django框架实现在线考试系统">
        
        <div class="content mb-5">
          <h1 id="1django的简介">1.Django的简介</h1>
<p>Django是一个基于MVC构造的框架。但是在Django中，控制器接受用户输入的部分由框架自行处理，所以 Django 里更关注的是模型（Model）、模板(Template)和视图（Views），称为 MTV模式。它们各自的职责如下：
|层次| 职责 |
|&ndash;|&ndash;|
|模型（Model），即数据存取层  |模型（Model），即数据存取层  |
|模板(Template)，即表现层  |处理与表现相关的决定： 如何在页面或其他类型文档中进行显示。  |
|视图（View），即业务逻辑层  |存取模型及调取恰当模板的相关逻辑。模型与模板的桥梁。  |</p>
<p>Django里重要的概念有：</p>
<ul>
<li>路由映射</li>
<li>视图函数</li>
<li>模板渲染</li>
<li>Django自带的ORM操作(对象关系映射)</li>
</ul>
<p>需要学习Django基础的同学可以浏览以下网站（非常有用）：
<a href="https://docs.pythontab.com/django/django1.5/">Django中文手册</a>
<a href="https://code.ziqiangxuetang.com/django/django-tutorial.html">自强学堂 Django基础教程</a>
<a href="https://www.django.cn/course/show-16.html">django中文网</a></p>
<h1 id="2项目的设计思路">2.项目的设计思路</h1>
<p>1.在线考试系统需求如下：
（1）系统登录：验证登录用户的身份，根据用户身份进入不同的页面。
（2）学生管理：供管理员使用，用于维护学生基本信息。
（3）老师管理：供管理员使用，用于维护教师的基本信息。
（4）试题管理：供教师管理，用于维护题库。
（5）组卷：供教师使用，教师可以根据考试科目，从题库中选择一些符合条件的试题，形成一份试卷。为了方便教师组卷，应提供方便的查询功能，使教师能查询不同要求的试题。
（6）在线考试：供学生使用，根据学生的班级和登录时间显示应考科目的试卷内容。试卷完成提交或考试时间到，不再允许学生修改试卷；实现自动评阅，记录学生的考试成绩，并将评阅结果提供给学生。
（7）成绩统计：供教师使用，按照科目、班级等统计学生的考试成绩。
（8）成绩查询：供教师和学生使用，提供不同查询方式，使教师和学生可以按需查询考试成绩。</p>
<p>2.设计思路
(1)确定角色
由需求分析看出，系统有三个基本角色，学生、教师、管理员。</p>
<ul>
<li>管理员负责后台信息的维护</li>
<li>系统要能实现自动阅卷功能</li>
</ul>
<p>(2)数据库表的设计
因此，我们至少需要如下几个表：</p>
<ul>
<li>学生表 student</li>
<li>教师表 teacher</li>
<li>题库表 question（为了方便，题库中都为单项选择题）</li>
<li>试卷表 paper</li>
<li>学生成绩表 grade</li>
</ul>
<p>设计完表，我们还需要确定<em>表间的关系</em>，是<strong>1对1(1:1)，1对多(1:n)，还是多对多(n:m)</strong>，这很<em>重要</em>，因为后面我们在models.py中创建表时，需要指出表间关系。
显然</p>
<ul>
<li>学生表和成绩表，1个学生可参加多门考试，会有多个成绩，学生表和成绩表为1:n</li>
<li>教师表和试卷表，1个教师会发布多套试卷，但1套试卷只能由1位教师发布，教师表和试卷表为1:n</li>
<li>试卷表和题库表，1套试卷里包含多道题，题库里的每道题也可出现在多个试卷中，故试卷表和题库表为n:m</li>
</ul>
<p>表的详细设计如下：（使用MindMaster绘制，有点丑，请忽略，重点写下自己的思考和思路）</p>
<p><img src="https://img-blog.csdnimg.cn/20190621143925529.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="表的设计"></p>
<h1 id="3搭建你的开发环境">3.搭建你的开发环境</h1>
<p>IDE使用PyCharm(profession版的)
python 3.7, Django 2.1.0
数据库为关系数据库mysql 5.6</p>
<p>为了更快的下载python模块，需要切换镜像源，我使用阿里云的镜像（还有很多镜像源），方法如下：
在    C:\Users\XXX(你的账户) 下建立 pip文件夹，在pip下建立 pip.ini文件，输入以下代码：</p>
<p>[global]
index-url = <a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a>
[install]
trusted-host=mirrors.aliyun.com</p>
<p>安装所需模块</p>
<ul>
<li>Django的安装： pip install django==2.1.0（请指定版本号，最新的Django需要数据库mysql5.6以上），你可以使用pip list来查看版本，使用 pip uninstall django 来卸载django模块</li>
<li>安装mysql数据库驱动  pip install pymysql
配置好后建立项目</li>
</ul>
<p>(1) 在PyCharm中建立Django项目
<img src="https://img-blog.csdnimg.cn/20190621160827701.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="建立项目">
图1 建立项目
此处没有使用虚拟环境，你也可以选择  “New environment using”选项来创建一个虚拟环境（可以避免多个项目使用不同模块的版本时发生冲突）</p>
<p>(2)创建app
Tools-&gt;Run manage.py task</p>
<p><img src="https://img-blog.csdnimg.cn/20190621164514261.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
在控制台输入 startapp student，创建一个student  app,
<img src="https://img-blog.csdnimg.cn/20190621164610390.png" alt="在这里插入图片描述">
之后需要将student app配置在项目的settings.py中，由于我的前台需要用到css、BootStrap、一些图片等文件，所以我在项目下建立static文件夹，并将其路径配置在settings.py文件中。整体目录如下：
<img src="https://img-blog.csdnimg.cn/20190621165956421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
（3）settings.py文件的配置
配置settings.py文件配置如下，请看注释</p>
<pre><code>INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'student',#将建立的app名称加入Installed_APPs中
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    # 'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'onlineExam.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')]
        ,
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'onlineExam.wsgi.application'


# Database
# https://docs.djangoproject.com/en/2.1/ref/settings/#databases

#配置mysql数据库
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'exam',#使用数据库的名称
        'USER':'root',#用户名
        'PASSWORD':'123456',#密码
        'HOST':'127.0.0.1',#地址
        'PORT':'3306'#端口号
    }
}


# Password validation
# https://docs.djangoproject.com/en/2.1/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/2.1/topics/i18n/

#修改语言为中文
LANGUAGE_CODE = 'zh-hans'

#修改时区为shanghai
TIME_ZONE = 'Asia/Shanghai'

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/2.1/howto/static-files/

#添加static文件夹
STATIC_URL = '/static/'
STATICFILES_DIRS=[
    os.path.join(BASE_DIR,'static'),
]

</code></pre><p>需要注意的地方有：</p>
<ul>
<li>INSTALLED_APPS  添加了新建的student app</li>
<li>DATABASES 配置你的数据库参数</li>
<li>MIDDLEWARE 注释掉了   # &lsquo;django.middleware.csrf.CsrfViewMiddleware'这一行</li>
<li>STATICFILES_DIRS 添加新建的static文件夹</li>
</ul>
<p>（4）在__init___.py文件添加mysql的驱动模块</p>
<pre><code>import pymysql
pymysql.install_as_MySQLdb()
</code></pre><h1 id="4分模块详细设计">4.分模块详细设计</h1>
<p>（1）建表
在student下的models.py中建表</p>
<pre><code>from django.db import models

# Create your models here.

# 为性别,学院 指定备选字段
SEX=(
    ('男','男'),
    ('女','女'),
)
DEPT=(
    ('计算机与通信学院','计算机与通信学院'),
    ('电气与自动化学院','电气与自动化学院'),
    ('外国语学院','外国语学院'),
    ('理学院','理学院'),
)

class Student(models.Model):
    id=models.CharField('学号',max_length=20,primary_key=True)
    name=models.CharField('姓名',max_length=20)
    sex=models.CharField('性别',max_length=4,choices=SEX,default='男')
    dept=models.CharField('学院',max_length=20,choices=DEPT,default=None)
    major=models.CharField('专业',max_length=20,default=None)
    password=models.CharField('密码',max_length=20,default='111')
    email=models.EmailField('邮箱',default=None)
    birth=models.DateField('出生日期')

    class Meta:
        db_table='student'
        verbose_name='学生'
        verbose_name_plural=verbose_name
    def __str__(self):
        return self.id;

class Teacher(models.Model):
    id=models.CharField(&quot;教工号&quot;,max_length=20,primary_key=True)
    name=models.CharField('姓名',max_length=20)
    sex=models.CharField('性别',max_length=4,choices=SEX,default='男')
    dept=models.CharField('学院',max_length=20,choices=DEPT,default=None)
    email=models.EmailField('邮箱',default=None)
    password=models.CharField('密码',max_length=20,default='000000')
    birth=models.DateField('出生日期')

    class Meta:
        db_table='teacher'
        verbose_name='教师'
        verbose_name_plural=verbose_name
    def __str__(self):
        return self.name;

class Question(models.Model):

    ANSWER=(
        ('A','A'),
        ('B','B'),
        ('C','C'),
        ('D','D'),
    )
    LEVEL={
        ('1','easy'),
        ('2','general'),
        ('3','difficult'),
    }
    id = models.AutoField(primary_key=True)
    subject = models.CharField('科目', max_length=20)
    title = models.TextField('题目')
    optionA=models.CharField('A选项',max_length=30)
    optionB=models.CharField('B选项',max_length=30)
    optionC=models.CharField('C选项',max_length=30)
    optionD=models.CharField('D选项',max_length=30)
    answer=models.CharField('答案',max_length=10,choices=ANSWER)
    level=models.CharField('等级',max_length=10,choices=LEVEL)
    score=models.IntegerField('分数',default=1)

    class Meta:
        db_table='question'
        verbose_name='单项选择题库'
        verbose_name_plural=verbose_name
    def __str__(self):
        return '&lt;%s:%s&gt;'%(self.subject,self.title);

class Paper(models.Model):
    #题号pid 和题库为多对多的关系
    pid=models.ManyToManyField(Question)#多对多
    tid=models.ForeignKey(Teacher,on_delete=models.CASCADE)#添加外键
    subject=models.CharField('科目',max_length=20,default='')
    major=models.CharField('考卷适用专业',max_length=20)
    examtime=models.DateTimeField()


    class Meta:
        db_table='paper'
        verbose_name='试卷'
        verbose_name_plural=verbose_name
    def __str__(self):
        return self.major;

class Grade(models.Model):
    sid=models.ForeignKey(Student,on_delete=models.CASCADE,default='')#添加外键
    subject=models.CharField('科目',max_length=20,default='')
    grade=models.IntegerField()

    def __str__(self):
        return '&lt;%s:%s&gt;'%(self.sid,self.grade);

    class Meta:
        db_table='grade'
        verbose_name='成绩'
        verbose_name_plural=verbose_name

</code></pre><p>(2)将模型映射到mysql数据库中，很简单，打开 Run manage.py Task,输入迁移命令
先输入makemigrate命令，作用是生成sql文件（create table student(id,sex,&hellip;.)  ），执行后可在student-&gt; migrations下看到执行结果
<img src="https://img-blog.csdnimg.cn/20190621171410883.png" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/20190621171808636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
再输入migrate命令，执行makemigrate生成的sql语句，表就建好了，你可以使用navicat或workBench等工具看到Django为我们建好的表
<img src="https://img-blog.csdnimg.cn/20190621171439760.png" alt="在这里插入图片描述"></p>
<p>（2）创建管理员
继续输入createsuperuser命令创建管理员，以便登陆后台
<img src="https://img-blog.csdnimg.cn/20190621172041760.png" alt="在这里插入图片描述">
（3）创建模板
在templates中建立index.html模板，作为考试系统首页.(可去官网下载BootStrap、JQuery)
在头文件里引入时注意顺序，jquery须在bootstrap.min.js之前引入</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;link href=&quot;../static/bootstrap-4.3.1-dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;!-- 必须在引入bootstarp.js之前引入 --&gt;
    &lt;script src=&quot;../static/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;../static/bootstrap-4.3.1-dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;

   &lt;link href=&quot;../static/css/index.css&quot; rel=&quot;stylesheet&quot;&gt;

    &lt;title&gt;在线考试系统&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;nav class=&quot;navbar navbar-expand-sm bg-light navbar-light &quot;&gt;
    &lt;ul class=&quot;navbar-nav&quot;&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link&quot; href=&quot;/toIndex/&quot;&gt;&lt;h3&gt;在线考试系统 首页&lt;/h3&gt;&lt;/a&gt;
        &lt;/li&gt;


        &lt;li&gt;
            &lt;button data-target=&quot;#stuModal&quot; data-toggle=&quot;modal&quot; class=&quot;btn btn-primary&quot;&gt;学生登陆&lt;/button&gt;
        &lt;/li&gt;

        &lt;li&gt;
            &lt;button data-target=&quot;#teaModal&quot; data-toggle=&quot;modal&quot; class=&quot;btn btn-primary&quot;&gt;教师登陆&lt;/button&gt;
        &lt;/li&gt;

        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link&quot; href=&quot;/admin&quot;&gt;管理员&lt;/a&gt;
        &lt;/li&gt;


        &lt;li style=&quot;position: fixed;right: 70px; font-size: 40px;color: #9fcdff&quot;&gt;{{ student.name }}{{ message }}&lt;/li&gt;
       &lt;a href=&quot;/logout/&quot;&gt;&lt;li style=&quot;position: fixed;right: 20px; font-size: 20px;top:22px;color:#cc1313&quot;&gt;退出&lt;/li&gt;&lt;/a&gt;

    &lt;/ul&gt;
&lt;/nav&gt;

&lt;div class=&quot;container&quot;&gt;

  &lt;br&gt;
  &lt;!-- Nav pills --&gt;
  &lt;ul class=&quot;nav nav-pills&quot; role=&quot;tablist&quot;&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
      &lt;a class=&quot;nav-link active&quot; data-toggle=&quot;pill&quot; href=&quot;#home&quot;&gt;个人信息&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
      &lt;a class=&quot;nav-link&quot; data-toggle=&quot;pill&quot; href=&quot;#menu1&quot;&gt;考试信息&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
      &lt;a class=&quot;nav-link&quot; data-toggle=&quot;pill&quot; href=&quot;#menu2&quot;&gt;成绩查询&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;

  &lt;!-- Tab panes --&gt;
  &lt;div class=&quot;tab-content&quot;&gt;
    &lt;div id=&quot;home&quot; class=&quot;container tab-pane active&quot;&gt;&lt;br&gt;
      &lt;h3&gt;个人信息&lt;/h3&gt;

        &lt;table class=&quot;table&quot;&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;属性&lt;/th&gt;
        &lt;th&gt;信息&lt;/th&gt;

      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;学号&lt;/td&gt;
        &lt;td&gt;{{ student.id }}&lt;/td&gt;

      &lt;/tr&gt;
      &lt;tr class=&quot;table-primary&quot;&gt;
        &lt;td&gt;姓名&lt;/td&gt;
        &lt;td&gt;{{ student.name }}&lt;/td&gt;

      &lt;/tr&gt;
      &lt;tr class=&quot;table-success&quot;&gt;
        &lt;td&gt;性别&lt;/td&gt;
        &lt;td&gt;{{ student.sex }}&lt;/td&gt;

      &lt;/tr&gt;
      &lt;tr class=&quot;table-danger&quot;&gt;
        &lt;td&gt;学院&lt;/td&gt;
        &lt;td&gt;{{ student.dept }}&lt;/td&gt;

      &lt;/tr&gt;

       &lt;tr class=&quot;table-success&quot;&gt;
        &lt;td&gt;专业&lt;/td&gt;
        &lt;td&gt;{{ student.major }}&lt;/td&gt;

      &lt;/tr&gt;

      &lt;tr class=&quot;table-warning&quot;&gt;
        &lt;td&gt;邮箱地址&lt;/td&gt;
        &lt;td&gt;{{ student.email }}&lt;/td&gt;

      &lt;/tr&gt;
      &lt;tr class=&quot;table-active&quot;&gt;
        &lt;td&gt;出生日期&lt;/td&gt;
        &lt;td&gt;{{ student.birth }}&lt;/td&gt;

      &lt;/tr&gt;

    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;

    &lt;div id=&quot;menu1&quot; class=&quot;container tab-pane fade&quot;&gt;&lt;br&gt;
      &lt;h3&gt;考试信息&lt;/h3&gt;
      &lt;p&gt;&lt;/p&gt;
        &lt;table class=&quot;table&quot;&gt;
    &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;学号&lt;/th&gt;
        &lt;th&gt;姓名&lt;/th&gt;
        &lt;th&gt;考试科目&lt;/th&gt;
          &lt;th&gt;考试时间&lt;/th&gt;
          &lt;th&gt;操作&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    {#   遍历字典  paper #}
    {% for paper1 in paper %}




     &lt;tr class=&quot;table-info&quot;&gt;
          &lt;td&gt;{{ student.id }}&lt;/td&gt;
          &lt;td&gt;{{ student.name }}&lt;/td&gt;
          &lt;td&gt;{{ paper1.subject }}{{ paper2.subject }}&lt;/td&gt;
          &lt;td&gt;{{ paper1.examtime }} {{ paper2.examtime }}&lt;/td&gt;
          &lt;td&gt;
              &lt;a href=&quot;/startExam/?sid={{ student.id }}&amp;subject={{ paper1.subject }}&quot;&gt;
              &lt;button class=&quot;btn btn-primary&quot; id=&quot;toExam+{{ paper1.subject }}&quot;&gt;开始考试&lt;/button&gt;
             &lt;/a&gt;
          &lt;/td&gt;
      &lt;/tr&gt;
    {% endfor %}



    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;

    &lt;div id=&quot;menu2&quot; class=&quot;container tab-pane fade&quot;&gt;&lt;br&gt;
      &lt;h3&gt;考试成绩&lt;/h3&gt;
      &lt;p&gt;&lt;/p&gt;
        &lt;table class=&quot;table&quot;&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th&gt;姓名&lt;/th&gt;
            &lt;th&gt;科目&lt;/th&gt;
            &lt;th&gt;成绩&lt;/th&gt;

          &lt;/tr&gt;
        &lt;/thead&gt;
    &lt;tbody&gt;

    {% for grade1 in grade %}
        &lt;tr class=&quot;table-primary&quot;&gt;
        &lt;td&gt;{{ student.name }}&lt;/td&gt;
        &lt;td&gt;{{ grade1.subject }}&lt;/td&gt;
        &lt;td&gt;{{ grade1.grade }}&lt;/td&gt;

      &lt;/tr&gt;
    {% endfor %}




    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;


{#学生登录的模态对话框#}
&lt;div class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; id=&quot;stuModal&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
            &lt;div class=&quot;modal-header&quot;&gt;
                &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;
                    &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 class=&quot;modal-title&quot;&gt;学生登陆&lt;/h4&gt;
            &lt;/div&gt;
            &lt;form class=&quot;form-horizontal&quot; action=&quot;/studentLogin/&quot; method=&quot;post&quot;&gt;
            &lt;div class=&quot;modal-body&quot;&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label class=&quot;col-sm-3 control-label&quot;&gt;学生学号&lt;/label&gt;
                        &lt;div class=&quot;col-sm-9&quot;&gt;
                            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;id&quot; placeholder=&quot;输入学号&quot;&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;addr&quot; class=&quot;col-sm-3 control-label&quot;&gt;密码&lt;/label&gt;
                        &lt;div class=&quot;col-sm-9&quot;&gt;
                            &lt;!--
                            &lt;textarea id=&quot;addr&quot; class=&quot;form-control&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;
                            --&gt;
                            &lt;input type=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot; placeholder=&quot;输入密码&quot;&gt;
                         &lt;/div&gt;
                    &lt;/div&gt;

            &lt;/div&gt;
            &lt;div class=&quot;modal-footer&quot;&gt;
                &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;取消&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;登陆&lt;/button&gt;
            &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;&lt;!-- /.modal-content --&gt;
    &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;
&lt;/div&gt;

{#老师登录的模态对话框#}
&lt;div class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; id=&quot;teaModal&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
            &lt;div class=&quot;modal-header&quot;&gt;
                &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;
                    &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 class=&quot;modal-title&quot;&gt;教师登陆&lt;/h4&gt;
            &lt;/div&gt;
            &lt;form class=&quot;form-horizontal&quot; action=&quot;/teacherLogin/&quot; method=&quot;post&quot;&gt;
            &lt;div class=&quot;modal-body&quot;&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;inputEmail3&quot; class=&quot;col-sm-3 control-label&quot;&gt;教师工号&lt;/label&gt;
                        &lt;div class=&quot;col-sm-9&quot;&gt;
                            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;id&quot; placeholder=&quot;输入学号&quot;&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;addr&quot; class=&quot;col-sm-3 control-label&quot;&gt;密码&lt;/label&gt;
                        &lt;div class=&quot;col-sm-9&quot;&gt;
                            &lt;!--
                            &lt;textarea id=&quot;addr&quot; class=&quot;form-control&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;
                            --&gt;
                            &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;输入密码&quot; class=&quot;form-control&quot;&gt;
                         &lt;/div&gt;
                    &lt;/div&gt;

            &lt;/div&gt;
            &lt;div class=&quot;modal-footer&quot;&gt;
                &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;取消&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;登陆&lt;/button&gt;
            &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;&lt;!-- /.modal-content --&gt;
    &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;
&lt;/div&gt;

&lt;/body&gt;

&lt;script&gt;
    $(&quot;#toExam+{{ paper1.subject }}&quot;).click(function () {

    });
&lt;/script&gt;
&lt;/html&gt;
</code></pre><p>Django使用{{  }}来使用后台传来的数据
(4)创建视图函数
在student-&gt;views.py中创建进入首页的视图函数index()</p>
<pre><code>from django.shortcuts import render,redirect
from student import models
from django.http import HttpResponse
from django.contrib.auth import logout
# Create your views here.
def index(request):
    return render(request,'index.html')
</code></pre><p>将视图函数配置在路由中，打开项目的urls.py文件</p>
<pre><code>from django.contrib import admin
from django.urls import path
from django.conf.urls import url
from student import views

urlpatterns = [
    #管理员登陆
    path('admin/', admin.site.urls),
    #默认访问首页
    url(r'^$',views.index),
]
</code></pre><p>r表示使用正则表达式解析url地址，^表示开始，$表示结束，views.index表示调用视图函数index
（5）启动服务器（可以看到效果了）
两种方式启动服务器：执行runserver命令，或点击绿色小图标
<img src="https://img-blog.csdnimg.cn/20190621173850833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
点击网址，默认8000端口，成功后如下图</p>
<p><img src="https://img-blog.csdnimg.cn/20190621174010304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
我们还需要定制自己的后台，在student-&gt;admin.py中注册各模块</p>
<pre><code>from django.contrib import admin
from .models import Student,Teacher,Paper,Question,Grade
# Register your models here.
# 修改名称
admin.site.site_header='在线考试系统后台'
admin.site.site_title='在线考试系统'

@admin.register(Student)
class StudentAdmin(admin.ModelAdmin):
    list_display = ('id','name','sex','dept','major','password','email','birth')# 要显示哪些信息
    list_display_links = ('id','name')#点击哪些信息可以进入编辑页面
    search_fields = ['name','dept','major','birth']   #指定要搜索的字段，将会出现一个搜索框让管理员搜索关键词
    list_filter =['name','dept','major','birth']#指定列表过滤器，右边将会出现一个快捷的过滤选项
</code></pre><p>对其他4个model注册后台</p>
<pre><code>@admin.register(Teacher)
class TeacherAdmin(admin.ModelAdmin):
    list_display = ('id', 'name', 'sex', 'dept', 'password', 'email', 'birth')
    list_display_links = ('id', 'name')
    search_fields = ['name', 'dept', 'birth']
    list_filter = ['name','dept']

@admin.register(Question)
class QuestionAdmin(admin.ModelAdmin):
    list_display = ('id','subject','title','optionA','optionB','optionC','optionD','answer','level','score')
</code></pre><p>刷新，点击首页管理员超链接，进入后台，使用前边创建的superuser账户和密码登陆
<img src="https://img-blog.csdnimg.cn/20190621181005741.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
进入后台
<img src="https://img-blog.csdnimg.cn/20190621174308791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
使用后台添加学生信息
（6）实现学生的登陆
这里需要用到Django内置的ORM模块，不在赘述，需要的同学看前边网站入门。</p>
<ol>
<li>在views.py中创建studentLogin函数</li>
<li>学生登陆的form表单将学生输入的学号（id）,密码（password）通过post方式提交给服务器，所以视图函数先接受表单参数，判断用户名和密码与数据库是否一致，若一致，则登陆成功。</li>
<li>登陆成功后，我需要发送至少三条信息给index.html,
（1）该学生的基本信息
（2）该学生考试信息，可通过该学生的专业名称在试卷表中查到有哪些要进行的考试
（3）该学生的考试成绩信息，可通过学生的学号在paper表中查询
代码如下：</li>
</ol>
<pre><code>def studentLogin(request):
    if request.method=='POST':
        # 获取表单信息
        stuId=request.POST.get('id')
        password=request.POST.get('password')
        print(&quot;id&quot;,stuId,&quot;password&quot;,password)
        # 通过学号获取该学生实体
        student=models.Student.objects.get(id=stuId)
        print(student)
        if password==student.password:  #登录成功
            #查询考试信息
            paper=models.Paper.objects.filter(major=student.major)
            #查询成绩信息
            grade=models.Grade.objects.filter(sid=student.id)
            # 渲染index模板
            return render(request,'index.html',{'student':student,'paper':paper,'grade':grade})

        else:return render(request,'index.html',{'message':'密码不正确'})
</code></pre><p>（7）模板的渲染（数据的显示）
登陆成功后，发送三个字典数据给index，index模板使用{{  }}、for等模板语句渲染</p>
<pre><code>&lt;div class=&quot;tab-content&quot;&gt;
    &lt;div id=&quot;home&quot; class=&quot;container tab-pane active&quot;&gt;&lt;br&gt;
      &lt;h3&gt;个人信息&lt;/h3&gt;
        &lt;table class=&quot;table&quot;&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;属性&lt;/th&gt;
        &lt;th&gt;信息&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;学号&lt;/td&gt;
        &lt;td&gt;{{ student.id }}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr class=&quot;table-primary&quot;&gt;
        &lt;td&gt;姓名&lt;/td&gt;
        &lt;td&gt;{{ student.name }}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr class=&quot;table-success&quot;&gt;
        &lt;td&gt;性别&lt;/td&gt;
        &lt;td&gt;{{ student.sex }}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr class=&quot;table-danger&quot;&gt;
        &lt;td&gt;学院&lt;/td&gt;
        &lt;td&gt;{{ student.dept }}&lt;/td&gt;
      &lt;/tr&gt;
       &lt;tr class=&quot;table-success&quot;&gt;
        &lt;td&gt;专业&lt;/td&gt;
        &lt;td&gt;{{ student.major }}&lt;/td&gt;
      &lt;/tr&gt;

      &lt;tr class=&quot;table-warning&quot;&gt;
        &lt;td&gt;邮箱地址&lt;/td&gt;
        &lt;td&gt;{{ student.email }}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr class=&quot;table-active&quot;&gt;
        &lt;td&gt;出生日期&lt;/td&gt;
        &lt;td&gt;{{ student.birth }}&lt;/td&gt;
      &lt;/tr&gt;

    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;

    &lt;div id=&quot;menu1&quot; class=&quot;container tab-pane fade&quot;&gt;&lt;br&gt;
      &lt;h3&gt;考试信息&lt;/h3&gt;
      &lt;p&gt;&lt;/p&gt;
        &lt;table class=&quot;table&quot;&gt;
    &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;学号&lt;/th&gt;
        &lt;th&gt;姓名&lt;/th&gt;
        &lt;th&gt;考试科目&lt;/th&gt;
          &lt;th&gt;考试时间&lt;/th&gt;
          &lt;th&gt;操作&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    {#   遍历字典  paper #}
    {% for paper1 in paper %}
        
     &lt;tr class=&quot;table-info&quot;&gt;
          &lt;td&gt;{{ student.id }}&lt;/td&gt;
          &lt;td&gt;{{ student.name }}&lt;/td&gt;
          &lt;td&gt;{{ paper1.subject }}{{ paper2.subject }}&lt;/td&gt;
          &lt;td&gt;{{ paper1.examtime }} {{ paper2.examtime }}&lt;/td&gt;
          &lt;td&gt;
              &lt;a href=&quot;/startExam/?sid={{ student.id }}&amp;subject={{ paper1.subject }}&quot;&gt;
              &lt;button class=&quot;btn btn-primary&quot; id=&quot;toExam+{{ paper1.subject }}&quot;&gt;开始考试&lt;/button&gt;
             &lt;/a&gt;
          &lt;/td&gt;
      &lt;/tr&gt;
    {% endfor %}
    
    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;
    &lt;div id=&quot;menu2&quot; class=&quot;container tab-pane fade&quot;&gt;&lt;br&gt;
      &lt;h3&gt;考试成绩&lt;/h3&gt;
      &lt;p&gt;&lt;/p&gt;
        &lt;table class=&quot;table&quot;&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th&gt;姓名&lt;/th&gt;
            &lt;th&gt;科目&lt;/th&gt;
            &lt;th&gt;成绩&lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
    &lt;tbody&gt;

    {% for grade1 in grade %}
        &lt;tr class=&quot;table-primary&quot;&gt;
        &lt;td&gt;{{ student.name }}&lt;/td&gt;
        &lt;td&gt;{{ grade1.subject }}&lt;/td&gt;
        &lt;td&gt;{{ grade1.grade }}&lt;/td&gt;
      &lt;/tr&gt;
    {% endfor %}
    &lt;/tbody&gt;
  &lt;/table&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</code></pre><p><img src="https://img-blog.csdnimg.cn/20190621182834522.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="个人信息">
<img src="https://img-blog.csdnimg.cn/20190621182857928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="考试信息"></p>
<p><img src="https://img-blog.csdnimg.cn/20190621182940537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
（8）教师登陆同上，学生在线考试和系统自动阅卷怎么实现呢？我是这样做的</p>
<ol>
<li>学生登陆成功后，点击&quot;开始考试&quot;按钮，按钮将两个请求信息发送到服务器，自己的学号和试卷的科目。</li>
<li>startExam视图函数接收到学号和试卷的科目，找到试卷信息发送给另一模板（exam.html）渲染
因此，建立继续建立exam.html模板和startExam视图函数</li>
</ol>
<pre><code>def startExam(request):
    sid = request.GET.get('sid')
    subject1=request.GET.get('subject')
    #得到学生信息
    student=models.Student.objects.get(id=sid)
    #试卷信息
    paper=models.Paper.objects.filter(subject=subject1)
    # print('学号',sid,'考试科目',subject1)
    return render(request,'exam.html',{'student':student,'paper':paper,'subject':subject1})
</code></pre><p>exam模板如下：</p>
<pre><code>&lt;!DOCTYPE HTML&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
&lt;title&gt;在线答题考试系统&lt;/title&gt;

    &lt;link href=&quot;../static/bootstrap-4.3.1-dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;!-- 必须在引入bootstarp.js之前引入 --&gt;
    &lt;script src=&quot;../static/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;../static/bootstrap-4.3.1-dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;../static/js/jquery-1.11.3.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;../static/js/jquery.countdown.js&quot;&gt;&lt;/script&gt;
    &lt;!--时间js--&gt;
    &lt;link href=&quot;../static/css/main.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;

    &lt;link href=&quot;../static/css/test.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;style&gt;
.hasBeenAnswer {
	background: #5d9cec;
	color:#fff;
}
&lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;nav class=&quot;navbar navbar-expand-sm bg-light navbar-light &quot;&gt;
    &lt;ul class=&quot;navbar-nav&quot;&gt;
        &lt;li class=&quot;nav-item active&quot;&gt;
            &lt;a class=&quot;nav-link&quot;&gt;&lt;h3&gt;在线考试系统&lt;/h3&gt;&lt;/a&gt;
        &lt;/li&gt;

        &lt;li class=&quot;nav-item active&quot;&gt;
            &lt;a class=&quot;nav-link&quot;&gt;&lt;h3&gt;当前科目:{{ subject }}&lt;/h3&gt;&lt;/a&gt;
        &lt;/li&gt;
        &lt;li style=&quot;position: fixed;right: 70px; font-size: 30px;color: #9fcdff&quot;&gt;{{ student.name }}&lt;/li&gt;

    &lt;/ul&gt;
&lt;/nav&gt;
&lt;div class=&quot;main&quot;&gt;
	&lt;!--nr start--&gt;
	&lt;div class=&quot;test_main&quot;&gt;
		&lt;div class=&quot;nr_left&quot;&gt;
			&lt;div class=&quot;test&quot;&gt;
				&lt;form action=&quot;/calGrade/&quot; method=&quot;post&quot;&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;sid&quot; value=&quot;{{ student.id }}&quot;&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;subject&quot; value=&quot;{{ subject }}&quot;&gt;
					&lt;div class=&quot;test_title&quot;&gt;
						&lt;p class=&quot;test_time&quot;&gt;
							&lt;i class=&quot;icon iconfont&quot;&gt;&amp;#xe6fb;&lt;/i&gt;&lt;b class=&quot;alt-1&quot;&gt;01:40&lt;/b&gt;
						&lt;/p&gt;
						&lt;font&gt;&lt;input type=&quot;submit&quot; name=&quot;tijiao&quot; value=&quot;交卷&quot;&gt;&lt;/font&gt;
					&lt;/div&gt;

						&lt;div class=&quot;test_content&quot;&gt;
							&lt;div class=&quot;test_content_title&quot;&gt;
								&lt;h2&gt;单选题&lt;/h2&gt;
								&lt;p&gt;
									&lt;span&gt;共&lt;/span&gt;&lt;i class=&quot;content_lit&quot;&gt;10&lt;/i&gt;&lt;span&gt;题，&lt;/span&gt;
                                    &lt;span&gt;合计&lt;/span&gt;&lt;i class=&quot;content_fs&quot;&gt;10&lt;/i&gt;&lt;span&gt;分&lt;/span&gt;
								&lt;/p&gt;
							&lt;/div&gt;
						&lt;/div&gt;
						&lt;div class=&quot;test_content_nr&quot;&gt;
							&lt;ul&gt;
                                {% for paper1 in paper %}
                                   {% for test in paper1.pid.all %}
                                       &lt;li id=&quot;{{ forloop.counter }}&quot;&gt;
                                        &lt;div class=&quot;test_content_nr_tt&quot;&gt;
											&lt;i&gt;{{ forloop.counter}}&lt;/i&gt;&lt;span&gt;({{ test.score }}分)&lt;/span&gt;
                                            &lt;font&gt;{{ test.title }}&lt;/font&gt;

										&lt;/div&gt;
                                       &lt;div class=&quot;test_content_nr_main&quot;&gt;
											&lt;ul&gt;
													&lt;li class=&quot;option&quot;&gt;
															&lt;input type=&quot;radio&quot; class=&quot;radioOrCheck&quot; name=&quot;{{ test.id }}&quot;
                                                            value=&quot;A&quot;/&gt;
														&lt;label&gt;A.
                                                            &lt;p class=&quot;ue&quot; style=&quot;display: inline;&quot;&gt;{{ test.optionA }}&lt;/p&gt;
														&lt;/label&gt;
													&lt;/li&gt;

													&lt;li class=&quot;option&quot;&gt;
															&lt;input type=&quot;radio&quot; class=&quot;radioOrCheck&quot; name=&quot;{{ test.id }}&quot;
                                                            value=&quot;B&quot;/&gt;
														&lt;label&gt;
															B.&lt;p class=&quot;ue&quot; style=&quot;display: inline;&quot;&gt;{{ test.optionB }}&lt;/p&gt;
														&lt;/label&gt;
													&lt;/li&gt;

													&lt;li class=&quot;option&quot;&gt;
															&lt;input type=&quot;radio&quot; class=&quot;radioOrCheck&quot; name=&quot;{{ test.id }}&quot;
                                                            value=&quot;C&quot;/&gt;
														&lt;label&gt;
															C.&lt;p class=&quot;ue&quot; style=&quot;display: inline;&quot;&gt;{{ test.optionC }}&lt;/p&gt;
														&lt;/label&gt;
													&lt;/li&gt;

													&lt;li class=&quot;option&quot;&gt;
															&lt;input type=&quot;radio&quot; class=&quot;radioOrCheck&quot; name=&quot;{{ test.id }}&quot;
                                                            value=&quot;D&quot;/&gt;
														&lt;label&gt;
															D.&lt;p class=&quot;ue&quot; style=&quot;display: inline;&quot;&gt;{{ test.optionD }}&lt;/p&gt;
														&lt;/label&gt;
													&lt;/li&gt;
											&lt;/ul&gt;
										&lt;/div&gt;
                                        &lt;/li&gt;
                                   {% endfor %}
                                {% endfor %}
							&lt;/ul&gt;
						&lt;/div&gt;
				&lt;/form&gt;
			&lt;/div&gt;
		&lt;/div&gt;

	&lt;/div&gt;
	&lt;!--nr end--&gt;
	&lt;div class=&quot;foot&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;

</code></pre><p>效果是这样的：
<img src="https://img-blog.csdnimg.cn/20190621183802249.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="考试">
自动阅卷就简单了：</p>
<ol>
<li>学生提交自己的作答给服务器（同时发送自己的学号和考试科目）</li>
<li>服务器根据考试科目找到该试卷，并逐个比较学生作答和答案是否一致，若一致，则得到该题的分数，并累加学生成绩</li>
<li>将学生的学号、该科成绩、科目名称作为一条记录插入到grade表中，返回首页</li>
</ol>
<p>这里有个细节，试卷中会有很多选择题，后台一次会接收到多个提交答案，我是这样处理的，让每个单选题（有4个选项，使用同一name）的name属性和该题在题库表中的id 保持一致，这样在获取到题号后可以得到该题的答案，以便判断是否作答正确，详见exam.html。</p>
<p>计算成绩的calGrade()视图函数如下：</p>
<pre><code>def calGrade(request):

    if request.method=='POST':
        # 得到学号和科目
        sid=request.POST.get('sid')
        subject1 = request.POST.get('subject')

        # 重新生成Student实例，Paper实例，Grade实例，名字和index中for的一致，可重复渲染
        student= models.Student.objects.get(id=sid)
        paper = models.Paper.objects.filter(major=student.major)
        grade = models.Grade.objects.filter(sid=student.id)

        # 计算该门考试的学生成绩
        question= models.Paper.objects.filter(subject=subject1).values(&quot;pid&quot;).values('pid__id','pid__answer','pid__score')

        mygrade=0#初始化一个成绩为0
        for p in question:
            qId=str(p['pid__id'])#int 转 string,通过pid找到题号
            myans=request.POST.get(qId)#通过 qid 得到学生关于该题的作答
            # print(myans)
            okans=p['pid__answer']#得到正确答案
            # print(okans)
            if myans==okans:#判断学生作答与正确答案是否一致
                mygrade+=p['pid__score']#若一致,得到该题的分数,累加mygrade变量

        #向Grade表中插入数据
        models.Grade.objects.create(sid_id=sid,subject=subject1,grade=mygrade)
        # print(mygrade)
        # 重新渲染index.html模板
        return render(request,'index.html',{'student':student,'paper':paper,'grade':grade})
</code></pre><p>（9）使用百度e-charts可视化数据
教师查看学生成绩，可以统计各个分数段的人数
<img src="https://img-blog.csdnimg.cn/20190621190613432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/20190621190657881.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI2OTMxMg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
我的思路：</p>
<ol>
<li>教师查看学生成绩，点击查看成绩按钮后，发送该科科目名称给后台</li>
<li>后台视图函数接收科目名，从grade表计算该科目各个分数段的人数，发送给前台模板渲染，并可视化</li>
</ol>
<p>视图函数如下：</p>
<pre><code>#教师查看成绩
def showGrade(request):
    subject1=request.GET.get('subject')
    grade=models.Grade.objects.filter(subject=subject1)

    data1 = models.Grade.objects.filter(subject=subject1, grade__lt=60).count()
    data2 = models.Grade.objects.filter(subject=subject1, grade__gte=60, grade__lt=70).count()
    data3 = models.Grade.objects.filter(subject=subject1, grade__gte=70, grade__lt=80).count()
    data4 = models.Grade.objects.filter(subject=subject1, grade__gte=80, grade__lt=90).count()
    data5 = models.Grade.objects.filter(subject=subject1, grade__gte=90).count()

    data = {'data1': data1, 'data2': data2, 'data3': data3, 'data4': data4, 'data5': data5}

    return render(request,'showGrade.html',{'grade':grade,'data':data,'subject':subject1})
</code></pre><h1 id="5总结">5.总结</h1>
<p>第一次写博客，感觉还不错，希望和各位小伙伴讨论。
源码已上传至gitHub,<a href="https://github.com/HelloZzy23/examOnline">去下载。</a></p>

        </div>

        
        
      </div>
    </div>
  </div>
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-5">
        <a href="https://trumpzhang.github.io"><img src="https://trumpzhang.github.io/images/logo.png" alt="张志宇的博客"></a>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Contact Me</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark" href="tel:***"><i
                class="ti-mobile mr-3 text-primary"></i>***</a></li>
          <li class="mb-3"><i class="ti-location-pin mr-3 text-primary"></i>甘肃兰州</li>
          <li class="mb-3"><a class="text-dark" href="mailto:2567269204@qq.com"><i
                class="ti-email mr-3 text-primary"></i>2567269204@qq.com</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Social Contacts</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://github.com/trumpzhang/">github</a></li>
          
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Categories</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark"
              href="/categories/centos">Centos</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/django">Django</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/hadoop">Hadoop</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/qt">Qt</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/scala">Scala</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/spring-boot">Spring boot</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/spring-cloud">Spring cloud</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/ssm">Ssm</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/vue">Vue</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Quick Links</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://trumpzhang.github.io/about">About</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://trumpzhang.github.io/blog">Blog</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://trumpzhang.github.io/contact">Contact</a></li>
          
        </ul>
      </div>
      <div class="col-12 border-top py-4 text-center">
        | @2020 <a href="https://trumpzhang.github.io">张志宇</a> All Rights Reserved |
      </div>
    </div>
  </div>
</footer>

<script>
  var indexURL = "https://trumpzhang.github.io/index.json"
</script>

<!-- JS Plugins -->

<script src="https://trumpzhang.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://trumpzhang.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://trumpzhang.github.io/plugins/slick/slick.min.js"></script>

<script src="https://trumpzhang.github.io/plugins/venobox/venobox.min.js"></script>

<script src="https://trumpzhang.github.io/plugins/search/fuse.min.js"></script>

<script src="https://trumpzhang.github.io/plugins/search/mark.js"></script>

<script src="https://trumpzhang.github.io/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://trumpzhang.github.io/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script></body>
</html>